# API集成模块文档

## 文件说明

### `/lib/volcengine-api.js`
火山引擎即梦API集成模块
- 图片生成功能
- 参考图支持
- 错误处理

### `/lib/claude-api.js`
Claude API集成模块
- 剧本解析
- 关键帧识别
- 分镜描述生成

### `/lib/image-utils.js`
图片处理工具
- 图片上传
- 格式转换
- 临时文件管理

## API调用流程

1. **剧本解析**
   - 用户输入剧本 → Claude分析 → 返回结构化数据

2. **第一张图生成**
   - 文本描述 → 即梦API → 生成首张参考图

3. **批量生成**
   - 参考图 + 新描述 → 即梦API → 生成剩余分镜图

## 错误处理

- API调用失败重试机制
- 参数验证
- 用户友好错误提示